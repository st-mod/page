var e={650:(e,t)=>{}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{function e(t){let n="";for(const i of t)n+="string"!=typeof i?function(t){for(const n of t){const t=e(n);if(t.length>0)return t}return""}(i.children):i;return n}n.d(i,{I:()=>I,h0:()=>T,M:()=>O}),n(650);let t,o=S("210mm"),r=S("297mm"),c=".4in",l=".4in",a=".4in",d=".4in",s="0px",u=0,f=1,m=0,p=0,g=[];const h={};function b(t){for(const n of t)if(e(n).length>0)return n;return[]}function v(e){const t=e%2==0,n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),u=document.createElement("div"),f=document.createElement("header"),m=document.createElement("main"),p=document.createElement("footer"),g=document.createElement("div"),h=document.createElement("div"),b=document.createElement("span"),v=document.createElement("span");n.append(i),i.append(u),u.append(f),u.append(m),u.append(p),f.append(g),p.append(h),g.append(b),g.append(v),n.setAttribute("viewBox",`0 0 ${o} ${r}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),u.style.fontSize="16px";const y=`calc(${d} + ${s})`;return u.style.marginLeft=t?l:y,u.style.marginRight=t?y:l,f.style.height=c,m.style.display="flow-root",m.style.height=`calc(${r}px - ${c} - ${a})`,p.style.height=a,h.textContent=e.toString(),{element:n,headingIndexEle:b,headingContentEle:v,main:m,indexEle:h}}async function y(e,n,i){const o=n[e%2==0?u:f];if(void 0!==o&&void 0!==t){"heading"===o.orbit&&i.headingIndexEle.append(new Text(o.index.join(".")));const{abbr:e}=o.unit.options;"string"==typeof e?i.headingContentEle.append(new Text(e)):"object"==typeof e?i.headingContentEle.append(await t.compileLine(b(e))):i.headingContentEle.append(await t.compileLine(b(o.unit.children)))}}function x(e,t){for(;;){for(;null!==e.previousSibling;)e.previousSibling.remove();if(null===e.parentNode||e.parentNode===t)break;e=e.parentNode}}function w(e,t){for(;;){for(;null!==e.nextSibling;)e.nextSibling.remove();if(null===e.parentNode||e.parentNode===t)break;e=e.parentNode}}async function E(e,n,i,o){if(n.append(e),e.getBoundingClientRect().bottom<=n.getBoundingClientRect().bottom)return;function r(){if(i)return e.remove(),{nline:e,breakPointOffset:o}}if(void 0===t||1!==e.children.length||1!==e.childNodes.length)return r();const c=t.context.idToIndexInfo[e.children[0].id];if(void 0===c)return r();const l=e.querySelectorAll(".breakable>*");if(0===l.length)return r();for(let i=l.length-1;i>=0;i--){if(w(l[i],e),e.getBoundingClientRect().bottom>n.getBoundingClientRect().bottom)continue;const r=(await t.compileSTDN([[c.unit]])).children[0],a=r.querySelectorAll(".breakable>*")[o+i];if(void 0===a)return;return x(a,r),a.remove(),{nline:r,breakPointOffset:o+i+1}}e.remove();const a=(await t.compileSTDN([[c.unit]])).children[0];if(o>0){const e=a.querySelectorAll(".breakable>*")[o-1];if(void 0===e)return;x(e,a),e.remove()}if(i)return{nline:a,breakPointOffset:o};n.append(a)}async function N(e,n){n.innerHTML="";let i=0,o=1,r=1,c=v(r);const l=[c];n.append(c.element);let a=!1;function d(){o++,l.push(c=v(++r)),n.append(c.element),a=!1}for(const n of e){let e=1/0;for(;i<g.length;i++){const t=g[i],{id:o,index:r,orbit:c}=t;if(null===n.querySelector(`[id=${JSON.stringify(o)}]`))break;const l="heading"===c?r.length:0;e>l&&(e=l)}if(void 0!==t&&n.children.length>0){const i=n.children[0];if(i.classList.contains("break")){(e<=m||i.classList.contains("right"))&&o%2==1&&d();const n=t.context.idToIndexInfo[i.id];if(void 0!==n&&"break"===n.unit.tag){const{index:e}=n.unit.options;"number"==typeof e&&isFinite(e)&&e%1==0&&e>=1&&(r=e-1)}d()}else e<=p&&(a&&d(),e<=m&&o%2==0&&d())}let l=n,s=0;for(;;){const e=await E(l,c.main,a,s);if(void 0===e){l.childNodes.length>0&&l.getBoundingClientRect().height>0&&(a=!0);break}l=e.nline,s=e.breakPointOffset,d()}}await async function(e){let t=0,n=[],i=0;for(const o of e){for(;t<g.length;t++){const e=g[t],{id:i,index:r,orbit:c}=e;if(null===o.main.querySelector(`[id=${JSON.stringify(i)}]`))break;h[i]=o.indexEle.textContent??void 0;const l="heading"===c?r.length:0;for(let e=l+1;e<n.length;e++)n[e]=void 0;n[l]=e}await y(++i,n,o)}}(l)}function S(e){return e.endsWith("px")?Number(e.slice(0,-2)):e.endsWith("cm")?96*Number(e.slice(0,-2))/2.54:e.endsWith("mm")?96*Number(e.slice(0,-2))/25.4:e.endsWith("in")?96*Number(e.slice(0,-2)):e.endsWith("pc")?16*Number(e.slice(0,-2)):e.endsWith("pt")?4*Number(e.slice(0,-2))/3:NaN}function C(e){if(e.endsWith(" landscape")){C(e.slice(0,-10).trim());const t=o;return o=r,void(r=t)}if(e.endsWith(" portrait"))return void C(e.slice(0,-9).trim());if("A5"===e)return o=S("148mm"),void(r=S("210mm"));if("A4"===e)return o=S("210mm"),void(r=S("297mm"));if("A3"===e)return o=S("297mm"),void(r=S("420mm"));if("B5"===e)return o=S("176mm"),void(r=S("250mm"));if("B4"===e)return o=S("250mm"),void(r=S("353mm"));if("JIS-B5"===e)return o=S("182mm"),void(r=S("257mm"));if("JIS-B4"===e)return o=S("257mm"),void(r=S("364mm"));if("letter"===e)return o=S("8.5in"),void(r=S("11in"));if("legal"===e)return o=S("8.5in"),void(r=S("14in"));if("ledger"===e)return o=S("11in"),void(r=S("17in"));const[t,n]=e.trim().split(/\s+/,2).map(S);if(isFinite(t)&&t>0){if(o=t,void 0===n)return void(r=t);isFinite(n)&&n>0&&(r=n)}}function k(e){if("string"!=typeof e)return;const t=document.createElement("style");document.head.append(t),C(e),t.textContent=`@page{size:${o}px ${r}px}body>.lr-struct>main>article{max-width:${o}px}`}let $=!1;const B=[],O=async(e,n)=>{const i=document.createElement("div");if($)return i;$=!0;const o=document.body.querySelector("article");if(null===o)return i;var r;t=n,g=n.context.indexInfoArray.filter((e=>"heading"===e.orbit||"title"===e.unit.tag)),k(e.options.size),function(e){if("string"!=typeof e)return;const t=e.split(/\s+/,4);1===t.length?(c=t[0],l=t[0],a=t[0],d=t[0]):2===t.length?(c=t[0],l=t[1],a=t[0],d=t[1]):3===t.length?(c=t[0],l=t[1],a=t[2],d=t[1]):(c=t[0],l=t[1],a=t[2],d=t[3])}(e.options.margin),"number"!=typeof(r=e.options.binging)?"string"==typeof r&&(s=r):s=r+"px",function(e){if("number"==typeof e&&isFinite(e)&&e%1==0&&e>=0)return u=e,void(f=e);if("string"!=typeof e)return;let[t,n]=e.split(/\s+/,2).map(Number);isFinite(t)&&t%1==0&&t>=0&&(u=t),isFinite(n)&&n%1==0&&n>=0&&(f=n)}(e.options["header-level"]),function(e){"number"==typeof e&&isFinite(e)&&e%1==0&&e>=0&&(m=e,p<m&&(p=e))}(e.options["right-level"]),function(e){"number"==typeof e&&isFinite(e)&&e%1==0&&e>=m&&(p=e)}(e.options["break-level"]);const h=function(e){return"number"==typeof e&&isFinite(e)&&e>=0?1e3*e:1e3}(e.options["break-delay"]),b=function(e){return"number"==typeof e&&isFinite(e)&&e%1==0&&e>=1?e:1}(e.options["break-num"]),v=new MutationObserver((async()=>{if(!i.isConnected)return;v.disconnect(),await new Promise((e=>setTimeout(e,h)));const e=Array.from(o.children);for(let t=0;t<b;t++)await N(e,o),await new Promise((e=>setTimeout(e,1e3)));for(const e of B)await e()}));return v.observe(document.body,{childList:!0,subtree:!0}),i},I=async(e,t)=>{const n=document.createElement("div");n.classList.add("breakable");const i="number"==typeof(o=e.options["dot-gap"]??function(e,t,n){const i=function(e,t,n){const i=n[t];return void 0===i?[]:i[e]??[]}("dot-gap","contents",n);if(0!==i.length)return i[i.length-1]}(0,0,t.context.tagToGlobalOptions))&&isFinite(o)&&o>0?o:16;var o;for(const{unit:e,orbit:o,index:r,id:c}of g){if("heading"!==o||r.length>3)continue;const l=document.createElement("div"),a=document.createElement("span"),d=document.createElement("span"),s=document.createElement("div"),u=document.createElement("a");l.classList.add(`level${r.length}`),u.href=`#${encodeURIComponent(c)}`,n.append(l),l.append(a),l.append(d),l.append(s),s.append(u),a.append(new Text(r.join("."))),d.append(await t.compileLine(b(e.children))),B.push((async()=>{u.textContent=h[c]??"";let{left:e}=l.getBoundingClientRect();const{top:t,left:o}=u.getBoundingClientRect();for(const{right:n,bottom:i}of d.getClientRects())i>=t&&n>e&&(e=n);if(o<=e)return;const r=n.closest("foreignObject");if(null===r)return;const{width:a}=r.getBoundingClientRect(),s=Math.floor((o-e)*r.width.animVal.value/a/i);for(let e=0;e<s;e++){const e=document.createElement("div");e.style.width=`${i}px`,u.before(e)}}))}return n},T=async(e,t)=>{const n=document.createElement("h1");return n.append(await t.compileSTDN(e.children)),n}})();var o=i.I,r=i.h0,c=i.M;export{o as contents,r as h0,c as page};